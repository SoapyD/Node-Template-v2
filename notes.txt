
-Add health the popup unit data

-highlight units in the same squad to make fixing coherancy easier.

ERRORS
----------------------------

RELOAD GAME
----------------------------
-maybe save unit direction so it can be redrawn when a complete reload occurs.


SPRITE-ANIMATIONS
----------------------------
-resetting movememnt needs to recalculate sprite direction
-check how shooting affects direction
-create an example weapon sprite loaded on top of the existing sprite


ACTIONS
----------------------------
-Make sure end turn passed over readying unit UI popups

GameSceneUI
----------------------------
-Make sure that any deaths record the correct score for the attacking unit


BUGS
----------------------------
-BUG -If there's a selected unit and move selected, then resend potential paths.

-BUG -errors aren't saving useful details or any for that matter

-BUG -shouldn't be able to select to move a unit into an enemy units sprite


STATES
----------------------------
-add in function to advance side so the turn can be passed on

-implement a full set of moving states for actions, by which I mean, a switch that'll advance 
the current mode once all players have readied up

STATES
    -Move
    -Shoot
    -Charge
    -Fight
    -Effects
    -Reset
    -Sync
    -End Turn



ARMY SELECTION
----------------------------
-In socket room, send list of factions available to user so they can be selected


ARMY PLACEMENT
----------------------------
-implement the old army placement method





WOULD LIKES
----------------------------
-BARRAGE - have a random location close to selected area as the eventual target

-modernize the login and register input fields

-put special rules on weapons as well as units

-remove NULL moving and shooting elements so they don't tax the socket emit

-include a fighting bonus for units fighting the same target unit. +1 per additional fighter

-Add a limiter on barriers for collisions.barrier so only barriers like "blunt" can be affected by bullets
    -DONE -check BLUNTing action actually appears when it affects a bullet

-figure a new way for stopping markers appearing off the edge of the map now that 0 tiles are 
showing as true in checkCollision


//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
######  ####### #     # ####### 
#     # #     # ##    # #       
#     # #     # # #   # #       
#     # #     # #  #  # #####   
#     # #     # #   # # #       
#     # #     # #    ## #       
######  ####### #     # ####### 
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////

-DONE -set sprite depth depending on Y position
-DONE -set tile depth depending on Y position

-DONE -when a plug takes a path past a unit then ends movement outside of combat range, it still shows them as in combat
at the end of the path
    -Fixed - check on client side wasn't checking to see if clashing unit array had any entries, only that it existed

-DONE -Set current side for players so ready/unready banner will display
-DONE -Add unit readiness option to game UI.
-DONE -Pass player data back to clients
-DONE -Pass back ready status for players back to all clients
-DONE -Make sure ready status for players is sent back and displayed by clients

-DONE -popup appearing on game world and not UI, so is scrolling when the map is scrolled
    -Moved thie functionality to generate in GameUIScene instead

-DONE -make sure selected unit is still highlighted

-DONE -pass side data, setting the current side

-DONE -Effects needs to tick down life of barriers and update the client side

-DONE -make sure any barriers still in the game are reloaded
    -DONE -Make sure they reload with the right life value

-DONE -check and status effects still apply once a game is reloaded

-DONE -Couldn't remove a special ability from the squad list, only replace it
    -FIXED -updated controller to check for missing array saves then add them in to overwrite those removed array elements

-DONE -Selecting a new unit when selecting shooting targets resets the draw targets
    -FIXED -This was part of the reset selected unit process. DrawPath() uses the same graphic as targets

-DONE -databaseHandler.updateData in actions.reset() is causing multiple errors. Can't save() document 
    multiple times in pararrel
    -FIXED -This is resolved by removing the updateData action in 'select mode' as it's immediately followed by the reset

-DONE -There may be a bug that appropriates damage to the wrong unit
    -CANCELLED -Can't see any evidence of this

-DONE -Need to reset complete reload path generations and the like as I've now seperated setMode and resetAll 

-DONE -user_data object doesn't exist in socket room.
    -FIX -Move this to clientRoomHandler.user.id instead
-DONE -complete reload in move seems to mess up cohesion checks when paths are reset after setMode is run
    -check if cohesion checks are run when reset removes paths and such
    -they were not, had to check for any squads affected by path resets then pass the resulting cohesion update_options
    back to each client.

-DONE -Redraw all targets, fight targets etc a unit has
-DONE -click location for the reset location of a unit with a path stops users from being able to select that unit for shooting later 
(as the click location doesn't align to where the unit sprite is)
    -REASON -This was being caused by actionHandler.reset not being able to reset paths and targets when a mode is changed
-DONE -check redraw of paths and targets works with complete reload
    -It isn't working but think this may be due to a reset being run when the mode is reset
    -set mode is run by the server after the saveunit method id run


FIGHTING
-BUG -Right click on fighting is deletion all melee actions lined up, instead of just the last one
    -DONE -Also check shooting for this bug
    -DONE -It also allows users to apply any number of targets, which undoes previous ones
    -DONE -Also doesn't show x/x targets aligned
   

UI 
----------------------------
-DONE -put UI back into the game
-DONE -when hovering over units, pass the unit id within hover range back to the client so chance percentages can be worked out
-DONE -hide / show special rules when a unit is selected
    -DONE -show this selected unit when not hovering over another unit 


REJOIN GAME
----------------------------
-DONE -actually reconnect a player when they disconnect
-DONE -run a complete reload of units and data when a room is rejoined.

-Allow for a complete reload from a page refresh, allowing a user who get kicked out a game to very quickly get back in without 
any issues.
    -DONE -reload from refresh of page doesn't work for socket room because gamecore.data.id is blank,
    the id for game_data would need to be saved to the room or vis versa in order to link them properly.
    -DONE -Stop the socket room from reloading into a waiting room if a game is being rejoined
    -DONE -Using the squad setup this.units array is spotty, just refault the insert of units into gameCore.assets
    -DONE -Figure out why the mode button text isn't displaying properly.

EFFECTS
    -DONE - Need to check for POISON status, apply damage and tick down health of effect        
    -DONE -regen - 20% chance of the unit regenerating any lost wounds suffered

-DONE -Make COHERANCY work with lone units; it's green all the time. This'll allow for the new selection process to work with them.

-DONE -Highlight a unit when it's selected to shoot and fight

SPECIAL RULES
    -DONE -barrage - you may fire a shot with a weapon indirectly
    -DONE -sword dance - unit can leave combat without suffering opportunity attacks from enemies
    -DONE -swift - unit can charge even if they've shot their weapon
    -DONE -berserker - unit can double the number of targets from their melee weapon the turn they move into combat
    -poison
        -DONE -Need to apply poison to units hit by it during shooting
        -DONE -status effect isn't being applied to a unit within the area of a status effect when shooting. 
        Needs to run utils.checkStatusEffects
        -DONE -need to draw particle listing effects that're passed to bullets via targets and blast_targets vars

MOVEMENT
    -DONE -check to see if a unit is leaving combat and check and apply damage once it's finished moving

FIGHTING
    -DONE -Need to pass the "in combat with" fight info to draw symbols on client when movement ends
    -DONE -fight needs to say when a unit can or can't be a target
    -DONE -apply unit "in combat" check
    -DONE -apply opportunity attack if combat is left

-DONE -Right click in movement isn't resetting cohesion

-FIXED -when units data is trying to be saved, it looks like because it's a nested array, they don't save. 
Figured out a method to loop through units and save their data but need to#
THIS WASN'T A BUG AFTER ALL. The value weren't seen in the database as they were being reset at the end of the playing action
    -NOTE -Doesn't happen when setting actions (but before they're appled). The reason for this is that i'm 
    using the updateone method
    -check through action process saves and test they working
    -update those methods if the data doesn't save
    -figure out an easy way to easily update only units that need updating

-DONE -Both players (not on the same side I think), have to ready up before a turn will play

RESET
    -DONE -Clear live tiles on reset actions
    -DONE -Make reset all a function in gameCore so it can be run by other functions

-DONE -add in multiple players on the same game screen which can be used for testing or single screen gaming
-DONE -Fix shooting bug that causes bullet to hit our side

FIGHTING
    -DONE -Need to get the drawing of damage properly working

SHOOTING
    -DONE -targets set e.g. 1/2 graphic, only generates after the targets are cleared

MOVEMENT
    -DONE -Make a selected unit's path stand out once it's been updated
    -DONE -Highlight movement path when a unit is selected
    -DONE -Make the selected unit stand out in terms of cohesion brightness


-DONE -BUG -Collision check works only sometimes
    -This issue was down to the path adjustment in game_collisions, it was actually making multiple adjustments to the last place 
    in a path causing it to move off to the top left hand side of any room with each check made.

MOVEMENT
-DONE -Finalise movemement once it's completed
-DONE -make the path line dissappear one the object is reached

FIGHTING
-DONE -Finalise fighting once it's completed

SHOOTING
-DONE -Finalise shooting once it's completed

RESET
-DONE -Add reset for moved, shot and fought

SPECIAL RULES
-DONE -whirling dervish - unit adds 4 to their melee armour piercing value the turn they move into combat
-DONE -sniper - unit adds 4 to their armour piercing value if they don't move before taking the shot
-DONE -firing drills - unit that doesn't move can double the number of shots from their ranged weapon



STATUS effects
-DONE -Pass effects back to movement path if a unit passed through them
-DONE -do the same for target and splash targets of bullets

SHOOTING
-DONE -Check barriers to see if they affect bullets
-DONE -apply effects for sniping units / effects when figuring out wounding
-DONE -apply damage reduction when shield barrier is crossed


-DONE -Cohesion checks
-DONE -Update positions of units
-DONE -if a unit has a saved path on the server, use the end path for the selection position instead
-DONE -if a path is reset for a unit, waterfall any unit path resets that it affects.


-DONE -Limit the range to the maximum range of a gun
-DONE -Keep a list of potential unit shooting targets that can be referred back to later

-DONE -save the potential targets to the gamedata table
-DONE -generate blast markers
-DONE -generate barrier
-DONE -generate wounding
-DONE -Figure out in the timeline exactly where a bullet will die

-Full Check
    -DONE -Generate target paths for all units
    -DONE -When all units are readied up
        -DONE -tick through bullets, deciding what order they'll hit in, and what wounding occurs
        -DONE -figure out if a unit is dead in this step phase so when the next bullet is figured out, it'll then carry past any "dead units"

-Smart Check
    -Maybe instead of stopping a bullet entirely when it's path is checked, all unit stops are logged
    -Then pass a set number of wounding scores that can then be applied to any unit it hits
    -There would need to be a way for the server to figure out who's actually hit though


-DONE -liveMessage alert is spawning for a second or two, causing a stutter
-DONE -Grey out the offscene menu when a room is succesfully join or created then close it after the message bar is removed

-DONE -use the game template setup and connect to the socket using a guest login
-DONE -Move the pathfinder script to the server and load the MAP JSON file
-DONE -Strip down the unit class to completely seperate out any functions that can be carried out on the server with those those must be on the client side
    -DONE -Sprite generation and movement, CLIENT
    -DONE -setting actions, SERVER
    -DONE -path checking to show available spaces, SERVER
-DONE -Tie the marker to an actual user ID instead of just the first one



-DONE -Create a means of generating a path on the server then passing back a series of positions and angles for the sprite to follow
-DONE -Control the game state on the Server now its been seperated from the GameUI class

-DONE -Position a unit then generate possible positions for them to move in the server
    -run a loop x number of times a second then cancel it when it's no longer needed
    -return all possible movement position
-DONE -When a possible position is clicked on
    -recognise the click
    -generate path to that position then send it to the client
    -draw the client path
    -set a timer on the server that calculates which marker the unit should be on over x seconds then send that position to the client to align the client
    -make the unit interpolate along the given path